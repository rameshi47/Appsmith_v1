SELECT 
    u.id,
    u.username,
    u.email,
    r.role_name,
    r.permissions,
    u.is_active,
    u.last_login
FROM users u
JOIN roles r ON u.role_id = r.id
WHERE u.username = {{username_input.text}}
AND u.password_hash = crypt({{password_input.text}}, u.password_hash)
AND u.is_active = TRUE;